window.setImmediate||function(){"use strict";var o=0,i={},s=!0,n=Array.prototype.slice,a="setImmediatePolyfillMessage";function c(e){var t,e=e.data;"string"==typeof e&&0==e.indexOf(a)&&(t=i[e])&&(delete i[e],function(e){var t=e[0];switch(e.length){case 1:return t();case 2:return t(e[1]);case 3:return t(e[1],e[2])}t.apply(window,n.call(e,1))}(t))}window.setImmediate=function(){for(var e=o++,t=a+e,n=arguments.length,r=new Array(n);n--;)r[n]=arguments[n];return i[t]=r,s&&(s=!1,window.addEventListener("message",c)),window.postMessage(t,"*"),e},window.clearImmediate=function(e){delete i[a+e]}}(),function(e){"use strict";var l="[[PromiseStatus]]",h="[[PromiseValue]]",p="[[OnFulfilled]]",y="[[OnRejected]]",u="[[OriginalError]]",o="pending",i="internal pending",b="fulfilled",m="rejected",f="not an array.",t='constructor Promise requires "new".',w=e.setImmediate||require("timers").setImmediate,d=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};function s(e){this[u]=e}function v(e){return e instanceof s}function a(e){return"function"==typeof e}function g(e){return e instanceof I}function n(e){return e}function r(e){throw e}function c(e){delete e[p],delete e[y]}function B(e){for(var t=e.length,n=0;n<t;n++)e[n]()}function E(e,t,n){var r=A(n);g(r)?r.then(e,t):v(r)?t(r[u]):e(n)}function A(n){var r,e;if(g(n))return n;if(e=n,Object(e)===e){try{r=n.then}catch(e){return new s(e)}if(a(r))return new I(function(e,t){w(function(){try{r.call(n,e,t)}catch(e){t(e)}})})}return null}function P(t,e){function n(e){t[l]==o&&!function t(n,e){var r=A(e);g(r)?(n[l]=i,r.then(function(e){t(n,e)},function(e){S(n,e)})):v(r)?S(n,r[u]):(n[l]=b,n[h]=e,(e=n[p])&&e.length&&(c(n),B(e)))}(t,e)}function r(e){t[l]==o&&S(t,e)}try{e(n,r)}catch(e){r(e)}}function S(e,t){var n=e[y];e[l]=m,e[h]=t,n&&n.length&&(c(e),B(n))}function I(e){if(!g(this))throw new TypeError(t);this[l]=o,this[h]=void 0,P(this,e)}I.prototype.then=function(c,u){var f,d=this;return c=a(c)?c:n,u=a(u)?u:r,f=new I(function(n,r){function e(e){var t;try{t=e(d[h])}catch(e){return void r(e)}t===f?r(new TypeError("then() cannot return same Promise that it resolves.")):E(n,r,t)}function t(){w(e,c)}function o(){w(e,u)}switch(d[l]){case b:t();break;case m:o();break;default:s=t,a=o,(i=d)[p]||(i[p]=[],i[y]=[]),i[p].push(s),i[y].push(a)}var i,s,a})},I.prototype.catch=function(e){return this.then(n,e)},I.resolve=function(n){var r=A(n);return g(r)?r:new I(function(e,t){v(r)?t(r[u]):e(n)})},I.reject=function(n){return new I(function(e,t){t(n)})},I.race=function(o){return new I(function(e,t){var n,r;if(d(o))for(r=o.length,n=0;n<r;n++)E(e,t,o[n]);else t(new TypeError(f))})},I.all=function(c){return new I(function(n,e){var t,r,o,i,s=0,a=0;if(d(c)){for(r=(c=c.slice(0)).length,i=0;i<r;i++)g(t=A(o=c[i]))?(a++,t.then(function(t){return function(e){c[t]=e,++s==a&&n(c)}}(i),e)):v(t)?e(t[u]):c[i]=o;a||n(c)}else e(new TypeError(f))})},"undefined"!=typeof module&&module.exports?module.exports=e.Promise||I:e.Promise||(e.Promise=I)}(this),function(e){"use strict";var t,n,s,r,o,i,a,c,u,f;function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return e="string"!=typeof e?String(e):e}function h(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function y(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function b(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function m(e){var t=new FileReader,n=b(t);return t.readAsArrayBuffer(e),n}function w(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(s&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(r&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&s&&a(e))this._bodyArrayBuffer=w(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!c(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=w(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=y(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,n=y(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=b(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(e,t){var n,r=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=t.method||this.method||"GET",e=n.toUpperCase(),-1<u.indexOf(e)?e:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function B(e){var n=new FormData;return e.trim().split("&").forEach(function(e){var t;e&&(e=(t=e.split("=")).shift().replace(/\+/g," "),t=t.join("=").replace(/\+/g," "),n.append(decodeURIComponent(e),decodeURIComponent(t)))}),n}function E(e,t){t=t||{},this.type="default",this.status="status"in t?t.status:200,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}e.fetch||(t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,s="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),r="FormData"in e,(o="ArrayBuffer"in e)&&(i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(e){return e&&DataView.prototype.isPrototypeOf(e)},c=ArrayBuffer.isView||function(e){return e&&-1<i.indexOf(Object.prototype.toString.call(e))}),p.prototype.append=function(e,t){e=d(e),t=l(t);var n=this.map[e];this.map[e]=n?n+","+t:t},p.prototype.delete=function(e){delete this.map[d(e)]},p.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},p.prototype.set=function(e,t){this.map[d(e)]=l(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),h(n)},p.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),h(t)},p.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),h(n)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries),u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},v.call(g.prototype),v.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e},f=[301,302,303,307,308],E.redirect=function(e,t){if(-1===f.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})},e.Headers=p,e.Request=g,e.Response=E,e.fetch=function(n,i){return new Promise(function(r,e){var t=new g(n,i),o=new XMLHttpRequest;o.onload=function(){var n,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",n=new p,t.split(/\r?\n/).forEach(function(e){var t=e.split(":"),e=t.shift().trim();e&&(t=t.join(":").trim(),n.append(e,t))}),n)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;r(new E(t,e))},o.onerror=function(){e(new TypeError("Network request failed"))},o.ontimeout=function(){e(new TypeError("Network request failed"))},o.open(t.method,t.url,!0),"include"===t.credentials&&(o.withCredentials=!0),"responseType"in o&&s&&(o.responseType="blob"),t.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===t._bodyInit?null:t._bodyInit)})},e.fetch.polyfill=!0)}("undefined"!=typeof self?self:this);var idb=function(e){"use strict";let o,s;const a=new WeakMap,c=new WeakMap,u=new WeakMap,n=new WeakMap,r=new WeakMap;let f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function i(e){return"function"==typeof e?(n=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s=s||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]).includes(n)?function(...e){return n.apply(l(this),e),d(a.get(this))}:function(...e){return d(n.apply(l(this),e))}:function(e,...t){t=n.call(l(this),e,...t);return u.set(t,e.sort?e.sort():[e]),d(t)}:(e instanceof IDBTransaction&&(i=e,c.has(i)||(t=new Promise((e,t)=>{const n=()=>{i.removeEventListener("complete",r),i.removeEventListener("error",o),i.removeEventListener("abort",o)},r=()=>{e(),n()},o=()=>{t(i.error||new DOMException("AbortError","AbortError")),n()};i.addEventListener("complete",r),i.addEventListener("error",o),i.addEventListener("abort",o)}),c.set(i,t))),r=e,(o=o||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]).some(e=>r instanceof e)?new Proxy(e,f):e);var i,t,n,r}function d(e){if(e instanceof IDBRequest)return function(i){const e=new Promise((e,t)=>{const n=()=>{i.removeEventListener("success",r),i.removeEventListener("error",o)},r=()=>{e(d(i.result)),n()},o=()=>{t(i.error),n()};i.addEventListener("success",r),i.addEventListener("error",o)});return e.then(e=>{e instanceof IDBCursor&&a.set(e,i)}).catch(()=>{}),r.set(e,i),e}(e);if(n.has(e))return n.get(e);var t=i(e);return t!==e&&(n.set(e,t),r.set(t,e)),t}const l=e=>r.get(e),h=["get","getKey","getAll","getAllKeys","count"],p=["put","add","delete","clear"],y=new Map;function b(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(y.get(t))return y.get(t);const r=t.replace(/FromIndex$/,""),o=t!==r,i=p.includes(r);if(r in(o?IDBIndex:IDBObjectStore).prototype&&(i||h.includes(r))){e=async function(e,...t){e=this.transaction(e,i?"readwrite":"readonly");let n=e.store;return o&&(n=n.index(t.shift())),(await Promise.all([n[r](...t),i&&e.done]))[0]};return y.set(t,e),e}}}return f={...m=f,get:(e,t,n)=>b(e,t)||m.get(e,t,n),has:(e,t)=>!!b(e,t)||m.has(e,t)},e.deleteDB=function(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",()=>t()),d(n).then(()=>{})},e.openDB=function(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(e,t),a=d(s);return r&&s.addEventListener("upgradeneeded",e=>{r(d(s.result),e.oldVersion,e.newVersion,d(s.transaction))}),n&&s.addEventListener("blocked",()=>n()),a.then(e=>{i&&e.addEventListener("close",()=>i()),o&&e.addEventListener("versionchange",()=>o())}).catch(()=>{}),a},e.unwrap=l,e.wrap=d,e;var m}({});const SERVER_DOMAIN="https://us-central1-pwa-demo-nil1729.cloudfunctions.net",GEOCODING_API_URL="https://us1.locationiq.com/v1/reverse.php",vapidPublicKey="BP4PlsYeQd4Wg6Mqn-o48s6mtktxM2EexAHHBVzplZqUUt8BSooje8UcRnmcAKhPBC6ETLlx21-MiX2yYu9UUnw",GEOCODING_API_KEY="pk.7b5b75ce36499da797a396dac9a449cc",dbPromise=idb.openDB("Posts",1,{upgrade(e){e.objectStoreNames.contains("feed-posts")||e.createObjectStore("feed-posts",{keyPath:"id"}),!e.objectStoreNames.contains("sync-posts")&&window.SyncManager&&e.createObjectStore("sync-posts",{keyPath:"id"})}});function writeData(r,o){return dbPromise.then(function(e){const t=e.transaction(r,"readwrite"),n=t.objectStore(r);return n.put(o),t.done})}function readData(n){return dbPromise.then(function(e){const t=e.transaction(n,"readonly").objectStore(n);return t.getAll()})}function clearStore(r){return dbPromise.then(function(e){const t=e.transaction(r,"readwrite"),n=t.objectStore(r);return n.clear(),t.done})}function clearItemFromStore(r,o){dbPromise.then(function(e){const t=e.transaction(r,"readwrite"),n=t.objectStore(r);return n.delete(o),t.done}).then(function(){console.log("Item Deleted!")})}function urlBase64ToUint8Array(e){for(var e=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function dataURItoBlob(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],e=new ArrayBuffer(t.length),r=new Uint8Array(e),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return new Blob([e],{type:n})}window.Promise||(window.Promise=Promise);const enableNotificationsButtons=document.querySelectorAll(".enable-notifications");navigator.serviceWorker?navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("Service Worker Registered!")}).catch(function(e){console.log(e)}):console.log("Service Worker not supported by this browser");async function displayConfirmNotification(){if(navigator.serviceWorker){const t={body:"You successfully subscribed to our Notification Services",icon:"/src/images/icons/app-icon-96x96.png",image:"/src/images/main-bg.jpg",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/app-icon-96x96.png",tag:"confirm-notification",renotify:!1};return navigator.serviceWorker.ready.then(function(e){e.showNotification("Successfully Subscribed!",t)})}}async function addSubscription(){if(navigator.serviceWorker){let t;return navigator.serviceWorker.ready.then(function(e){return(t=e).pushManager.getSubscription()}).then(function(e){if(null===e)return t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:urlBase64ToUint8Array(vapidPublicKey)})}).then(function(e){return fetch(`${SERVER_DOMAIN}/addNewSubscription`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({subscription:e})})}).then(function(e){if(e.ok)return displayConfirmNotification()}).catch(function(e){console.error(e)})}}function askForNotificationPermissions(){"default"===Notification.permission?Notification.requestPermission().then(function(e){"granted"===e&&addSubscription().then(hideNotificationsButtons).catch(function(e){console.log(e)})}):"denied"===Notification.permission?alert("Kindly allow Notifications from Site Settings"):alert("You already enabled Notifications!")}function showNotificationButton(){for(var e of enableNotificationsButtons)e.style.display="inline-block",e.addEventListener("click",askForNotificationPermissions)}function hideNotificationsButtons(){for(var e of enableNotificationsButtons)e.style.display="none",e.removeEventListener("click",askForNotificationPermissions)}window.Notification&&"granted"!==Notification.permission&&navigator.serviceWorker&&showNotificationButton();